(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const h of r.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&e(h)}).observe(document,{childList:!0,subtree:!0});function s(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function e(i){if(i.ep)return;i.ep=!0;const r=s(i);fetch(i.href,r)}})();const p=new Set(["hello","world","the","have","you","know","how","to","code","with","reset","test","game","start","stop","reset"]),n=2,l=1500,a=8,w=27,y=65,m=90,I="blue",d="white",c="gray",x="white",S="red",u=70;function T(o){const t=Array.from(o);return t[Math.floor(Math.random()*t.length)]}class A{constructor(t){this.canvas=t,this.ctx=null,this.wordSet=p,this.reset()}reset(){this.wordsInPlay=[],this.score=0,this.lastTimeWordAdded=null,this.delay=l,this.enemySpeed=n,this.playerInput="",this.fps=60,this.fpsInterval=1e3/this.fps,this.then=Date.now(),this.startTime=this.then,this.now,this.elapsed,this.health=20,this.maxHealth=20}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.wordsInPlay.forEach(t=>t.draw(this.ctx,this.playerInput)),this.ctx.fillStyle=d,this.ctx.font='48px "Roboto Mono", monospace',this.ctx.fillStyle=c,this.ctx.fillRect(this.canvas.width/2-150,0,300,50),this.ctx.fillStyle=d,this.ctx.fillText(": "+this.playerInput,this.canvas.width/2-150,39,300),this.ctx.font='24px "Roboto Mono", monospace',this.ctx.fillText("Score: "+this.score,0,25,150),this.drawHealthBar()}drawHealthBar(){const i=this.canvas.width-210;this.ctx.fillStyle=c,this.ctx.fillRect(i,10,200,30),this.drawRectBorder(i,10,200,30),this.ctx.fillStyle=S,this.ctx.fillRect(i,10,200*this.health/this.maxHealth,30)}drawRectBorder(t,s,e,i,r=1,h=x){this.ctx.fillStyle=h,this.ctx.fillRect(t-r,s-r,e+r*2,i+r*2)}update(){if(this.lastTimeWordAdded===null||this.lastTimeWordAdded<Date.now()-this.delay){const e=new E(T(this.wordSet),Math.random()*(this.canvas.height-u)+u);this.wordsInPlay.push(e),this.wordSet.delete(e.word),this.lastTimeWordAdded=Date.now()}this.wordsInPlay.forEach(e=>e.update());const t=this.wordsInPlay.filter(e=>e.x>this.canvas.width);t.length>0&&(this.wordsInPlay=this.wordsInPlay.filter(e=>!t.includes(e)),this.wordSet.add(t[0].word),this.health--),this.delay=this._calculateDelay(this.score),this.enemySpeed=this._calculateEnemySpeed(this.score),this.playerInput=this.playerInput.trim();const s=this.wordsInPlay.find(e=>e.word===this.playerInput);s&&(this.score+=1,this.playerInput="",this.wordSet.add(s.word),this.wordsInPlay=this.wordsInPlay.filter(e=>e.word!==s.word)),this.health<=0&&this.reset()}_calculateDelay(t){return t===0?l:t<25?l*.9:t<50?l*.85:t<100?l*.65:l*.5}_calculateEnemySpeed(t){return t<5?n:t<25?n*1.15:t<50?n*1.25:n*1.35}handleInput(t,s){if(t===void 0)return;const{keyCode:e,key:i}=t;if(e===a||e===w||e>=y&&e<=m){if(e===a&&t.ctrlKey){s.playerInput="";return}else if(e===a){s.playerInput=s.playerInput.slice(0,-1);return}i.length===1&&(s.playerInput+=t.key,s.playerInput=s.playerInput.trim())}}init(){this.ctx=this.canvas.getContext("2d"),this.reset(),this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update(),this.now=Date.now(),this.elapsed=this.now-this.then,this.elapsed>this.fpsInterval&&(this.then=this.now-this.elapsed%this.fpsInterval,this.ctx.fillStyle="white",this.draw())}}class E{constructor(t,s){this.word=t,this.y=s,this.x=0}draw(t,s){if(!(this.word&&this.word.length))return;t.font='48px "Roboto Mono", monospace';let e=!0;for(let i=0;i<this.word.length;i++){let r=this.word.charAt(i);e&&s.charAt(i)===r?t.fillStyle=I:(t.fillStyle="white",e=!1),t.fillText(r,this.x+i*25,this.y)}}update(t=n){this.move(t)}move(t=n){this.x+=t}}function H(o){const t=o.getContext("2d");o.width=window.innerWidth,o.height=window.innerHeight,t.fillRect(0,0,o.width,o.height);const s=new A(o);s.init(),window.addEventListener("keydown",e=>s.handleInput(e,s),{capture:!1})}document.querySelector("#app").innerHTML=`
    <div>
        <canvas id="counter"></canvas>
    </div>
`;const f=document.querySelector("#counter");f&&H(f);
