(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&o(n)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const d=new Set(["hello","world","the","have","you","know","how","to","code","with","reset","test","game","start","stop","reset"]),u=2,l=2e3,a=13,h=8,w=27,p=65,y=90,c=70;function m(r){const e=Array.from(r);return e[Math.floor(Math.random()*e.length)]}class I{constructor(e){this.canvas=e,this.ctx=null,this.wordSet=d,this.wordsInPlay=[],this.score=0,this.lastTimeWordAdded=null,this.delay=l,this.playerInput="",this.fps,this.fpsInterval,this.startTime,this.now,this.then,this.elapsed}reset(){this.wordsInPlay=[],this.score=0,this.lastTimeWordAdded=null,this.delay=l,this.wordSet=d,this.playerInput="",this.fps=60,this.fpsInterval=1e3/this.fps,this.then=Date.now(),this.startTime=this.then}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.wordsInPlay.forEach(e=>e.draw(this.ctx,this.playerInput)),this.ctx.fillStyle="white",this.ctx.font='48px "Roboto Mono", monospace',this.ctx.fillStyle="gray",this.ctx.fillRect(this.canvas.width/2-150,0,300,50),this.ctx.fillStyle="white",this.ctx.fillText(": "+this.playerInput,this.canvas.width/2-150,39,300)}update(){if(this.lastTimeWordAdded===null||this.lastTimeWordAdded<Date.now()-this.delay){const t=new g(m(this.wordSet),Math.random()*(this.canvas.height-c)+c);this.wordsInPlay.push(t),this.wordSet.delete(t.word),this.lastTimeWordAdded=Date.now()}this.wordsInPlay.forEach(t=>t.update());const e=this.wordsInPlay.filter(t=>t.x>this.canvas.width);e.length>0&&(this.wordsInPlay=this.wordsInPlay.filter(t=>!e.includes(t)),this.wordSet.add(e[0].word)),this.score>0?this.delay=l-this.score*100:this.score>5?this.delay=l-this.score*50:this.score>10?this.delay=l-this.score*25:this.score>15&&(this.delay=l-this.score*10)}handleInput(e,t){if(e===void 0)return;const{keyCode:o,key:s}=e;if(o===h||o===a||o===w||o>=p&&o<=y){if(o===a){if(t.playerInput==="")return;const i=t.wordsInPlay.find(n=>n.word===t.playerInput);i&&(console.log({found:i}),t.score+=1,t.playerInput="",t.wordSet.add(i.word),t.wordsInPlay=t.wordsInPlay.filter(n=>n.word!==i.word))}o===h&&e.ctrlKey?t.playerInput="":o===h&&(t.playerInput=t.playerInput.slice(0,-1)),s.length===1&&(t.playerInput+=e.key)}}init(){this.ctx=this.canvas.getContext("2d"),this.reset(),this.loop()}loop(){requestAnimationFrame(this.loop.bind(this)),this.update(),this.now=Date.now(),this.elapsed=this.now-this.then,this.elapsed>this.fpsInterval&&(this.then=this.now-this.elapsed%this.fpsInterval,this.ctx.fillStyle="white",this.draw())}}class g{constructor(e,t){this.word=e,this.y=t,this.x=0}draw(e,t){if(!(this.word&&this.word.length))return;let o=!0;for(let s=0;s<this.word.length;s++){let i=this.word.charAt(s);o&&t.charAt(s)===i?e.fillStyle="green":(e.fillStyle="white",o=!1),e.fillText(i,this.x+s*25,this.y)}}update(){this.move()}move(){this.x+=u}}function S(r){const e=r.getContext("2d");r.width=window.innerWidth,r.height=window.innerHeight,e.fillRect(0,0,r.width,r.height);const t=new I(r);t.init(),window.addEventListener("keydown",o=>t.handleInput(o,t),{capture:!1})}document.querySelector("#app").innerHTML=`
    <div>
        <canvas id="counter"></canvas>
    </div>
`;const f=document.querySelector("#counter");f.getContext&&S(f);
